{% load static %}
{% load date_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="{% static "/fontawesome/css/all.css" %}" >
	<link rel="stylesheet" href="{% static "/css/bootstrap.min.css" %}">
	<link rel="stylesheet" href="{% static "/css/style.css" %}"></link>
	<title>{% block title %}Tasks{% endblock %}</title>
	{% block head %}{% endblock %}
</head>
<body>
	<div id="fill-height" class="d-flex flex-column">
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a href="/" class="navbar-brand">Tasks</a>
		<button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#collapsible-target"
			aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse justify-content-end" id="collapsible-target">
			<ul class="navbar-nav mr-auto">
				{% if navItems %}
					{% for navItem in navItems %}
					<li class="nav-item">
						<a class="nav-link {{ navItem.cssClass }}" href="{{ navItem.href }}">{{ navItem.title }}</a>
					</li>
					{% endfor %}
				{% endif %}
			</ul>
			<span class="navbar-nav">
				{% if user.is_authenticated %}
					{% block nav %}
					{% endblock %}
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="authDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							{{ user.username }}
						</a>
						<div class="dropdown-menu dropdown-menu-right bg-dark text-white" aria-labelledby="authDropdown">
							{% if user.is_staff %}
							<a class="dropdown-item text-white" href="/admin">Admin</a>
							{% endif %}
							<a class="dropdown-item text-white" href="/accounts/settings">Preferences</a>
							<a class="dropdown-item text-white" href="{% url 'logout'%}">Logout</a>
						</div>
					</li>
				{% else %}
					<a class="nav-link" href="{% url 'login'%}?next={{request.path}}">Login</a>
				{% endif %}
			</span>
		</div>
	</nav>
	<div id="content">
	{% if messages %}
		{% for message in messages %}
			{% if message.tags == "error" %}
				<div class="alert alert-danger">
			{% elif message.tags == "warning" %}
				<div class="alert alert-warning">
			{% else %}
				<div class="alert alert-success">
			{% endif %}
			{{ message }}</div>
		{% endfor %}
	{% endif %}
	{% block content %}{% endblock %}
	</div>
	<script src="{% static "/js/jquery-3.2.1.min.js" %}"></script>
	<script src="{% static "/js/bootstrap.min.js" %}"></script>
	<script src="{% static "/js/moment-with-locales.min.js" %}"></script>
	<script src="{% static "/js/vue.min.js" %}"></script>
	<script type="text/javascript">
	$("#navDropdown").html($("#navDropdown li").sort(function (a, b) {
		left = String(a.value).padStart(4, '0');
		right = String(b.value).padStart(4, '0');
		return left == right ? 0 : left < right ? -1 : 1
	}));
	</script>
	<div class="flex-grow-1"></div>
	<footer class="bg-dark text-light">
		<div class="p-3 bg-dark float-left" id="statusBar">
			{{ statusBar }}
		</div>
		<div class="p-3 bg-dark float-right">
			Copyright WFG {% year %}
		</div>
	</footer>
	</div> <!-- End of flex -->
	{% block bottom %}{% endblock %}
</body>
</html>